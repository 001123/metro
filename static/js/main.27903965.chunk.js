(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,n){},169:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(10),l=n.n(s),o=(n(97),n(91)),i=n(12),c=n(15),u=n(13),p=n(8),m=n(14),h=(n(100),n(18)),f=n.n(h),v=function(e){function t(e){var n;Object(i.a)(this,t),console.log("<SoundMachineInstrument>constructor",e.key);var a={C3:e.samples[0],"C#3":e.samples[1],D3:e.samples[2]};return(n=Object(u.a)(this,Object(p.a)(t).call(this,a,{baseUrl:e.baseUrl||"./audio/"+e.key+"/"}))).key=e.key,n}return Object(m.a)(t,e),t}(h.Sampler),d={ACCENT_1:0,ACCENT_2:1,ACCENT_3:2},b={TABLA:"tabla",ELECTRO_KIT:"electrokit"},E=function(e){function t(e){var n;Object(i.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this))).state={},n.lib={},n.currentInstrument=void 0;var a=new v({key:b.TABLA,label:"Tabla",samples:["dha-slide.wav","dhin-slide.wav","tin.wav"]}).toMaster();n.lib[a.key]=a;var r=new v({key:b.ELECTRO_KIT,label:"Electronic Kit",samples:["Kick.wav","HiHat.wav","Snare.wav"]}).toMaster();return n.lib[r.key]=r,n.setInstrument(e),console.log("<InstrumentLib>done constructor"),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"setInstrument",value:function(e){if(void 0===this.lib[e])throw new Error("InstrumentLib has no such instrument with given key: "+e);this.currentInstrument=e}},{key:"getInstrument",value:function(){if(void 0===this.lib[this.currentInstrument])throw new Error("There is no such instrument in InstrumentLib: "+this.currentInstrument);return this.lib[this.currentInstrument]}}]),t}(a.Component),g=n(170),y=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={radius:50,height:150},n.myRef=r.a.createRef(),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"setActive",value:function(e){if(console.log("setActive",e),this.lastEl&&this.lastEl.classList.remove("active"),e<this.props.beats){var t=this.refs["el"+e];t.classList.add("active"),this.lastEl=t}}},{key:"componentDidUpdate",value:function(e,t){var n=this.myRef.current.offsetWidth,a=n/2-5;console.log("radius",a);for(var r=2*Math.PI/this.props.beats,s=0;s<this.props.beats;s++){var l=this.state.radius*Math.sin(r*s),o=-this.state.radius*Math.cos(r*s);this.refs["el"+s].style.position="absolute",this.refs["el"+s].style.left=n/2-20+l+"px",this.refs["el"+s].style.top=50+o+"px"}}},{key:"renderCells",value:function(e){for(var t=[],n=0;n<this.props.beats;n++)t.push(r.a.createElement("li",{ref:"el"+n},n+1));return t}},{key:"render",value:function(){return r.a.createElement(g.a,null,r.a.createElement("ul",{ref:this.myRef,className:"SimpleVis",style:{height:this.state.height}},this.renderCells()))}}]),t}(a.Component),C=y;y.defaultProps={beats:4};var S=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).accentNotes=["C3","C#3","D3"],n.instrumentLib=void 0,n.currentBeat=0,n.beatsPerStep=4,n.score=["C3","C#3","C#3","C#3"],n.state={isPlaying:!1},n.accents=[d.ACCENT_1],n.samples={},n.instruments={},n.part=null,n.repeat=function(e){var t=n.currentBeat++%n.beatsPerStep,a=n.score[t];console.log("play note",a,e),n.instrumentLib.getInstrument().triggerAttackRelease(a,"4n",e);var r=n.updateVis;f.a.Draw.schedule(function(){return r(t)},e)},n.setBpm=function(e){f.a.Transport.bpm.value=e},n.setBeatsPerStep=function(e){for(console.log("<SoundMachine>setBeatsPerStep",e),n.beatsPerStep=e;n.score.length>e;)n.score.pop();for(;n.score.length<e;)n.score.push(d.ACCENT_1);f.a.Transport.timeSignature=[e,4],n.setState({beatsPerStep:e})},n.updateVis=function(e){console.log("updateVis.currentBeat",e,f.a.Transport.progress),n.refs.vis.setActive(e)},n.playNote=function(e,t){n.instrumentLib.getInstrument().triggerAttackRelease(t,"4n",e)},n.restart=function(){},n.getBpm=function(){return f.a.Transport.bpm.value},n.instrumentLib=new E(n.props.instrument),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"onBufferError",value:function(){throw new Error("Some buffers weren't found")}},{key:"componentDidMount",value:function(){var e=this;(new f.a.Synth).toMaster().triggerAttackRelease("A2"),f.a.Buffer.on("error",function(){return e.onBufferError()}),f.a.Transport.on("stop",function(){return console.log("TRANSPORTstop")}),f.a.Transport.on("pause",function(){return console.log("TRANSPORT.pause")}),f.a.Transport.on("start",function(){return console.log("TRANSPORTstart")}),f.a.Transport.on("loop",function(){return console.log("TRANSPORT loop")}),f.a.context.latencyHint="playback";var t=this.repeat;f.a.Transport.scheduleRepeat(function(e){return t(e)},"4n",0),this.loopEndEvent=new f.a.Event(function(e,t){console.log("loop has finished!",e),t()},this.props.onLoopEnd),this.loopEndEvent.loop=!0}},{key:"setInstrument",value:function(e){this.instrumentLib.setInstrument(e)}},{key:"onDebug",value:function(){}},{key:"setLoopEnd",value:function(e){console.log("<SM>setLoopEnd",e),this.loopEndEvent.cancel(),this.loopEndEvent.barsAmount=e,this.loopEndEvent.loopEnd=this.loopEndEvent.barsAmount+"m",this.loopEndEvent.loop=!0,this.loopEndEvent.start(this.loopEndEvent.barsAmount+"m")}},{key:"setAccents",value:function(e){this.accents=e;for(var t=0;t<this.score.length;t++){var n=this.accentNotes[d.ACCENT_2];void 0!==e[t]&&e[t]===d.ACCENT_1?n=this.accentNotes[d.ACCENT_1]:void 0!==e[t]&&e[t]===d.ACCENT_3&&(n=this.accentNotes[d.ACCENT_3]),this.score[t]=n}}},{key:"setAccents_OBSOLETE",value:function(e){this.accents=e,this.part;for(var t=0;t<this.part.length;t++){var n=this.accentNotes[d.ACCENT_2];void 0!==e[t]&&e[t]===d.ACCENT_1?n=this.accentNotes[d.ACCENT_1]:void 0!==e[t]&&e[t]===d.ACCENT_3&&(n=this.accentNotes[d.ACCENT_3]),this.part.at("0:"+t,n)}}},{key:"render",value:function(){return r.a.createElement("div",{style:{width:"100%"}},r.a.createElement("div",null,"Sound is ",!0===this.state.isPlaying?"playing":"stopped"),r.a.createElement(C,{ref:"vis",beats:this.state.beatsPerStep}))}},{key:"stop",value:function(){console.log("<SoundMachine>stop()"),this.setState({isPlaying:!1}),this.currentBeat=0,f.a.Transport.stop()}},{key:"start",value:function(){console.log("<SoundMachine>start()"),this.setState({isPlaying:!0}),f.a.Transport.start("+0.1")}}]),t}(a.Component),k=S;S.defaultProps={beatsPerStep:4,onLoopEnd:null};var P={BY_BAR:"by_bar",BY_TIME:"by_time"},B=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(g.a,{className:"SimpleProgress"},r.a.createElement("div",{className:"bar",style:{width:this.props.value+"%",display:"block"}}))}}]),t}(a.Component),A=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={bars:[],stepProgress:0},n.timer={ref:null,startTime:null},n.stepsCounter=0,n.stepProgressUpdateInterval=50,n.planChanged=function(){console.log("<Planner>planChanged"),n.props.onChange&&n.props.onChange()},n.barRender=function(e){var t=n.state.currentStep===e.step?"current-step":"";return r.a.createElement("div",{onClick:function(){return n.onStepClick(e.step)},className:"step "+t,key:"key_"+e.bpm},void 0!==e.segmentDuration?n.formatTime(e.segmentDuration.toFixed(0)):e.end+" bars "," ","at ",e.bpm.toFixed(0))},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"makePlan",value:function(e){var t=e.bpmRange[0],n=e.bpmRange[1],a=[],r=t;if(e.playMode===P.BY_BAR)for(;r<=n;){var s={bpm:r,end:e.interval};a.push(s),r+=e.bpmStep}else for(;r<=n;){var l={time:0*e.interval,start:0*e.interval,end:0*e.interval+e.interval,bpm:r};a.push(l),r+=e.bpmStep}return a}},{key:"setPlan",value:function(e){var t=this,n=this.makePlan(e);console.log("<Planner>setPlan",n);var a=[],r=0,s=e.playMode;if(e.playMode===P.BY_BAR)for(var l=0;l<n.length;l++){var o={bpm:n[l].bpm,end:n[l].end,step:this.stepsCounter++};r+=60/n[l].bpm*e.beatsPerStep*n[l].end,a.push(o)}else for(l=0;l<n.length;l++){var i={time:n[l].time,timeEnd:n[l].end,segmentDuration:n[l].end-n[l].time,startTimeFormatted:this.formatTime(n[l].start),endTimeFormatted:this.formatTime(n[l].end),bpm:n[l].bpm,step:this.stepsCounter++};r+=n[l].end,a.push(i)}this.stepsCounter=0,this.setState(function(e){return{totalPlanTime:r,currentStep:0,bars:a,playMode:s}},function(){return t.planChanged()})}},{key:"stop",value:function(){console.log("lockBpm",this.props.lockBpm),this.timer&&(clearInterval(this.timer.ref),this.timer=void 0),this.stepProgressUpdateTimer&&(console.log("clearing stepProgressUpdateTimer"),clearInterval(this.stepProgressUpdateTimer),this.stepProgressUpdateTimer=void 0),this.resetStep()}},{key:"onInterval",value:function(){if(console.log("<Planner>onInterval"),this.props.lockBpm)console.log("<Planner>isLocked == true so don't advance anything");else{var e=this.state.currentStep;if(e+1>=this.state.bars.length)return console.log("no more steps, please stop()"),this.timer&&(clearInterval(this.timer.ref),this.time=void 0),void this.props.onAdvance(null);console.log("<Planner>advancing step to",e+1),this.setState({currentStep:e+1}),this.props.onAdvance(this.state.bars[this.state.currentStep])}}},{key:"start",value:function(){var e=this;if(console.log("<Planner>start()"),this.timer&&(clearInterval(this.timer.ref),this.timer.ref=void 0,this.timer.startTime=null,this.resetStep()),this.state.playMode===P.BY_TIME){var t=1e3*(this.state.bars[this.state.currentStep].timeEnd-this.state.bars[this.state.currentStep].time),n=this.onInterval.bind(this);console.log("setting interval",t),this.timer={ref:setInterval(n,t),startTime:new Date}}this.stepProgressUpdateTimer||(this.stepProgressUpdateTimer=setInterval(function(){return e.updateStepProgress()},this.stepProgressUpdateInterval))}},{key:"setProgressEvent",value:function(e){this.event=e}},{key:"updateStepProgress",value:function(){if(!this.props.lockBpm){var e=this.getCurrentBar(),t=0;if(this.state.playMode===P.BY_BAR)t=this.event.progress;else t=(Date.now()-this.timer.startTime.getTime()-e.segmentDuration*e.step*1e3)/e.segmentDuration/1e3;t>1&&(t=1),this.setState({stepProgress:t})}}},{key:"clear",value:function(){this.stepsCounter=0,this.setState({bars:[],currentStep:0}),this.planChanged()}},{key:"resetStep",value:function(){this.setState({currentStep:0}),this.props.onAdvance(this.state.bars[0])}},{key:"getCurrentBar",value:function(){if(this.state.currentStep>=this.state.bars.length)throw new Error("Trying to get step that doesn't exists");return this.state.bars[this.state.currentStep]}},{key:"onStepClick",value:function(e){var t=this;this.setState({currentStep:e},function(){return t.props.onAdvance(t.state.bars[t.state.currentStep])})}},{key:"render",value:function(){var e=this;return 0===this.state.bars.length?r.a.createElement("div",null,"No plan"):r.a.createElement(g.a,{className:"Planner"},r.a.createElement(B,{value:100*this.state.stepProgress}),r.a.createElement("div",{style:this.props.lockBpm?{opacity:.5}:{}},this.state.bars.map(function(t){return e.barRender(t)})),r.a.createElement("div",null,"Total time: ",this.formatTime(this.state.totalPlanTime)))}},{key:"padTime",value:function(e){return e<10?"0"+e:e}},{key:"formatTime",value:function(e){var t=new Date(0,0,0,0,0,0,0);t.setSeconds(e);var n="";return 0!==t.getMinutes()&&(n+=t.getMinutes(),n+=":"),n+=this.padTime(t.getSeconds())+"s"}}]),t}(a.Component),T=A;A.defaultProps={playMode:P.BY_BAR,currentStep:0};n(104),n(106);var O=n(173),j=n(174),M=n(161),N=n(180),I=n(177),R=n(178),w=n(179),_=n(48),L=n(47),D=n(171),Y=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,Object(_.a)(Object(p.a)(t.prototype),"render",this).call(this),r.a.createElement("div",null,r.a.createElement(D.a,{onClick:this.onBadgeClick,className:"d-i"},this.state.value)))}},{key:"onBadgeClick",value:function(){}}]),t}(L.b),V=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,Object(_.a)(Object(p.a)(t.prototype),"render",this).call(this),r.a.createElement(D.a,{onClick:this.onBadgeClick,className:"d-i"},this.state.bounds[0]," - ",this.state.bounds[1]))}}]),t}(L.a),x=n(90),U=n(172),K=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={bars:[]},n.accents=[d.ACCENT_1,d.ACCENT_2,d.ACCENT_3],n.renderCells=function(e){return e.map(function(e,t){return r.a.createElement(M.a,{size:"sm",color:n.getBtnColor(e),key:"barkey_"+t,onClick:function(){return n.handleCellClick(t)}},t+1)})},n.state.bars=n.prepareBars(e.defaultValue),n.state.bars[0]=d.ACCENT_1,n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"prepareBars",value:function(e){for(var t=this.getValue(),n=[],a=0;a<e;a++)n.push(void 0!==t[a]?t[a]:d.ACCENT_2);return n}},{key:"setBarsAmount",value:function(e){var t=this.prepareBars(e);this.setState({bars:Object(x.a)(t)},this.props.onAfterChange)}},{key:"setAccents",value:function(e){this.setState({bars:e})}},{key:"handleCellClick",value:function(e){var t=this.state.bars[e],n=this.accents[(t+1)%3];this.state.bars[e]=n,this.forceUpdate()}},{key:"getValue",value:function(){return this.state.bars}},{key:"getBtnColor",value:function(e){var t;switch(e){case d.ACCENT_2:t="secondary";break;case d.ACCENT_3:t="warning";break;default:t="primary"}return t}},{key:"render",value:function(){var e=this.props.onAfterChange;return r.a.createElement(U.a,{onClick:e},this.renderCells(this.state.bars))}}]),t}(a.Component),z=[{title:"4 beats every 4 bars",beatsPerStep:4,playMode:P.BY_BAR,interval:4,bpmStep:20,bpmRange:[100,400],accents:[0,1,2,1]},{title:"5 beats, every 1min",beatsPerStep:5,bpmRange:[200,400],accents:[0,1,0,0,2],playMode:P.BY_TIME,interval:60,bpmStep:10},{title:"Jhaptal",instrument:b.TABLA,beatsPerStep:10,bpmRange:[200,400],accents:[0,1,0,0,1,2,1,0,0,1],playMode:P.BY_TIME,interval:300,bpmStep:10}],F=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={},n.presets=z,n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"onPresetClick",value:function(e){this.props.onSelect(e)}},{key:"render",value:function(){var e=this;return r.a.createElement(g.a,{className:"PresetsManager"},r.a.createElement(O.a,null,this.presets.map(function(t,n){return r.a.createElement(j.a,{className:"preset",onClick:function(){return e.onPresetClick(t)},key:"preset_"+n},t.title)})))}}]),t}(a.Component),H=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(g.a,{className:"pane "+this.props.className},r.a.createElement(O.a,{className:"pane-title"},this.props.title),r.a.createElement(O.a,null,r.a.createElement(j.a,{className:"pane-body"},this.props.children)))}}]),t}(a.Component),J=H;H.defaultProps={title:"title",children:[],className:""};var W=n(175),G=n(176),$=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={playMode:P.BY_TIME,bpmStep:10,bpmStepDropdownOpen:!1,byTimeInterval:5,byBarInterval:2},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"onModeChange",value:function(e){this.setState({playMode:e},this.props.onAfterChange)}},{key:"onBpmStepChange",value:function(){this.setState(function(e){return{bpmStepDropdownOpen:!e.bpmStepDropdownOpen}})}},{key:"onBpmStepSelect",value:function(e){this.setState({bpmStep:e},this.props.onAfterChange)}},{key:"getValue",value:function(){return{playMode:this.state.playMode,interval:this.state.playMode===P.BY_BAR?this.state.byBarInterval:this.state.byTimeInterval,bpmStep:this.state.bpmStep}}},{key:"setValue",value:function(e){this.setState({playMode:e.playMode,bpmStep:e.bpmStep,byBarInterval:e.playMode===P.BY_BAR?e.interval:this.state.byBarInterval,byTimeInterval:e.playMode===P.BY_TIME?e.interval:this.state.byTimeInterval},this.props.onAfterChange)}},{key:"onInputChange",value:function(e){var t={};t[e.target.name]=Number(e.target.value),this.setState(t,this.props.onAfterChange)}},{key:"render",value:function(){var e=this;return r.a.createElement(J,{title:"Mode",className:"ModePanel"},r.a.createElement(U.a,null,r.a.createElement(M.a,{onClick:function(){return e.onModeChange(P.BY_BAR)},active:this.state.playMode===P.BY_BAR},"By bar"),r.a.createElement(M.a,{onClick:function(){return e.onModeChange(P.BY_TIME)},active:this.state.playMode===P.BY_TIME},"By time")),r.a.createElement(W.a,{isOpen:this.state.playMode===P.BY_BAR},r.a.createElement("div",null,"Increase speed every",r.a.createElement(G.a,{size:"sm",name:"byBarInterval",onChange:function(t){return e.onInputChange(t)},value:this.state.byBarInterval,type:"number",step:"1"}),"bars")),r.a.createElement(W.a,{isOpen:this.state.playMode===P.BY_TIME},r.a.createElement("div",null,"Increase speed every",r.a.createElement(G.a,{bsSize:"sm",name:"byTimeInterval",onChange:function(t){return e.onInputChange(t)},value:this.state.byTimeInterval,min:1,max:600,type:"number",step:"1"}),"seconds")),"increase speed by",r.a.createElement(N.a,{bsSize:"sm",style:{margin:"0px 5px"},isOpen:this.state.bpmStepDropdownOpen,toggle:function(){return e.onBpmStepChange()}},r.a.createElement(I.a,{caret:!0,size:"sm"},this.state.bpmStep),r.a.createElement(R.a,null,r.a.createElement(w.a,{onClick:function(){e.onBpmStepSelect(5)}},"5"),r.a.createElement(w.a,{onClick:function(){e.onBpmStepSelect(10)}},"10"),r.a.createElement(w.a,{onClick:function(){e.onBpmStepSelect(20)}},"20"),r.a.createElement(w.a,{onClick:function(){e.onBpmStepSelect(30)}},"30"),r.a.createElement(w.a,{onClick:function(){e.onBpmStepSelect(50)}},"50"))),"bpm")}}]),t}(a.Component),q=$;$.defaultProps={onAfterChange:null};var Q=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).timer={timerRef:null,startTime:null},n.state={bpmRange:[200,400],beatsPerStep:4,currentBpm:60,instrument:b.ELECTRO_KIT,instrumentDropdownOpen:!1,cycleDropdownOpen:!1,lockBpm:!1},n.onBeatsPerStepChange=function(){var e=n.getUiState();e.beatsPerStep!==n.refs.sm.beatsPerStep&&(n.refs.barManager.setBarsAmount(e.beatsPerStep),n.refs.sm.setBeatsPerStep(e.beatsPerStep))},n.onPlanAdvanced=function(e){e?(console.log("<App>onPlanAdvanced() new step:",e),n.setBpm(e.bpm)):(n.refs.planner.stop(),n.refs.sm.stop())},n.setBpm=function(e){n.setState({currentBpm:e}),n.refs.sm.setBpm(e)},n.onPlanChanged=function(){console.log("<App>onPlanChanged");var e=n.refs.planner.getCurrentBar();console.log("<App>currentBar",e),n.refs.sm.setLoopEnd(e.end||!1),e&&n.setBpm(e.bpm),n.refs.sm.state.isPlaying&&n.refs.planner.start()},n.handleStartStop=function(){console.log(n.refs.sm.state.isPlaying),!0===n.refs.sm.state.isPlaying?(n.refs.planner.stop(),n.refs.sm.stop()):(n.refs.planner.start(),n.refs.sm.start())},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.refs.planner.setPlan(this.getUiState()),this.refs.planner.setProgressEvent(this.refs.sm.loopEndEvent)}},{key:"onInstrumentSelect",value:function(e){this.refs.sm.setInstrument(e),this.setState({instrument:e})}},{key:"renderCyclePane",value:function(){var e=this;return r.a.createElement(g.a,{className:"pane"},r.a.createElement(O.a,{className:"pane-title"},"CYCLE"),r.a.createElement(O.a,null,r.a.createElement(j.a,{xs:3},"Beats per step"),r.a.createElement(j.a,null,r.a.createElement(Y,{ref:"beatsPerStep",min:2,max:16,defaultValue:this.state.beatsPerStep,onAfterChange:function(){return e.onBeatsPerStepChange()}}))),r.a.createElement(O.a,null,r.a.createElement(j.a,{xs:3},"Accents"),r.a.createElement(j.a,null,r.a.createElement(K,{onAfterChange:function(){return e.onAccentsChange()},ref:"barManager",defaultValue:this.state.beatsPerStep}))))}},{key:"renderTempoPane",value:function(){var e=this;return r.a.createElement(g.a,{className:"pane"},r.a.createElement(O.a,{className:"pane-title"},"RANGE"),r.a.createElement(O.a,null,r.a.createElement(j.a,{xs:"3"},"BPM"),r.a.createElement(j.a,null,r.a.createElement(V,{ref:"bpmRange",min:30,max:600,defaultValue:[this.state.bpmRange[0],this.state.bpmRange[1]],pushable:!0,onAfterChange:function(){return e.onBpmRangeChange()}}))))}},{key:"renderPlaybackPane",value:function(){var e=this;return r.a.createElement(g.a,{className:"pane"},r.a.createElement(O.a,{className:"pane-title"},"PLAYBACK"),r.a.createElement(O.a,null,r.a.createElement(j.a,{xs:"3"},"Instrument"),r.a.createElement(j.a,null,r.a.createElement(N.a,{isOpen:this.state.instrumentDropdownOpen,toggle:function(){return e.onInstrumentChange()}},r.a.createElement(I.a,{caret:!0},this.state.instrument),r.a.createElement(R.a,null,r.a.createElement(w.a,{onClick:function(){e.onInstrumentSelect(b.TABLA)}},"Tabla"),r.a.createElement(w.a,{onClick:function(){e.onInstrumentSelect(b.ELECTRO_KIT)}},"Electro"))))))}},{key:"onModePanelChanged",value:function(){var e=this.getUiState();console.log("<App>onModePanelChanged",e),this.refs.planner.setPlan(e),e.playMode===P.BY_BAR&&this.refs.sm.setLoopEnd(e.bars)}},{key:"renderMidPane",value:function(){return r.a.createElement(g.a,null,r.a.createElement(O.a,null,r.a.createElement(j.a,null,this.renderExamplesPane())),r.a.createElement(O.a,null,r.a.createElement(j.a,null,this.renderVisPane())),r.a.createElement(O.a,null,r.a.createElement(j.a,null)))}},{key:"renderLeftPane",value:function(){var e=this;return r.a.createElement(g.a,null,r.a.createElement(O.a,null,r.a.createElement(j.a,null,this.renderTempoPane())),r.a.createElement(O.a,null,r.a.createElement(j.a,null,r.a.createElement(q,{ref:"modePanel",onAfterChange:function(){return e.onModePanelChanged()}}))),r.a.createElement(O.a,null,r.a.createElement(j.a,null,this.renderPlaybackPane())),r.a.createElement(O.a,null,r.a.createElement(j.a,null,this.renderCyclePane())))}},{key:"renderExamplesPane",value:function(){var e=this;return r.a.createElement(g.a,{className:"pane"},r.a.createElement(O.a,{className:"pane-title"},"Presets"),r.a.createElement(F,{onSelect:function(t){return e.onPresetSelect(t)}}))}},{key:"renderVisPane",value:function(){var e=this;return r.a.createElement(g.a,{className:"pane"},r.a.createElement(O.a,{className:"pane-title"},"Visualisation"),r.a.createElement(O.a,null,r.a.createElement(k,{ref:"sm",beatsPerStep:this.state.beatsPerStep,onLoopEnd:function(){return e.onLoopEnd()},instrument:this.state.instrument})))}},{key:"onPresetSelect",value:function(e){console.log("setting preset",e),this.refs.bpmRange.setState({bounds:[e.bpmRange[0],e.bpmRange[1]]}),this.refs.beatsPerStep.setState({value:e.beatsPerStep}),this.refs.barManager.setBarsAmount(e.beatsPerStep),this.refs.sm.setBeatsPerStep(e.beatsPerStep),this.refs.barManager.setAccents(e.accents),this.refs.modePanel.setValue(e)}},{key:"renderPlanPane",value:function(){var e=this;return r.a.createElement(g.a,{className:"pane"},r.a.createElement(O.a,{className:"pane-title"},"Plan"),r.a.createElement(O.a,null,r.a.createElement(T,{lockBpm:this.state.lockBpm,onChange:function(){return e.onPlanChanged()},onAdvance:function(t){return e.onPlanAdvanced(t)},ref:"planner"})))}},{key:"renderRightPane",value:function(){return r.a.createElement(g.a,null,r.a.createElement(O.a,null,r.a.createElement(j.a,null,r.a.createElement(g.a,{className:"pane"},r.a.createElement(O.a,{className:"pane-title"},"BPM"),r.a.createElement(O.a,{className:this.state.lockBpm?"locked":""},r.a.createElement(j.a,null," ",this.state.currentBpm.toFixed(0)))))),r.a.createElement(O.a,null,r.a.createElement(j.a,null,this.renderPlanPane())))}},{key:"onLoopEnd",value:function(){this.getUiState().playMode===P.BY_BAR&&(console.log("onLoopEnd fetched"),this.refs.planner.onInterval())}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(g.a,{className:"app-container"},r.a.createElement(O.a,null,r.a.createElement(j.a,null,this.renderLeftPane()),r.a.createElement(j.a,null,this.renderMidPane()),r.a.createElement(j.a,null,this.renderRightPane())),r.a.createElement(O.a,null,r.a.createElement(j.a,null,r.a.createElement(M.a,{onClick:function(){return e.handleStartStop()},block:!0},"Start / Stop")),r.a.createElement(j.a,null,r.a.createElement(M.a,{onClick:function(){return e.onLockBpmBtn()}},"Lock BPM")))))}},{key:"onDebug",value:function(){this.refs.sm.onDebug()}},{key:"onLockBpmBtn",value:function(){this.setState({lockBpm:!this.state.lockBpm})}},{key:"onBpmRangeChange",value:function(){var e=this.getUiState();e.bpmRange[0]===this.state.bpmRange[0]&&e.bpmRange[1]===this.state.bpmRange[1]||(this.setState({bpmRange:e.bpmRange}),this.refs.planner.setPlan(e))}},{key:"onInstrumentChange",value:function(){this.setState(function(e){return{instrumentDropdownOpen:!e.instrumentDropdownOpen}})}},{key:"getUiState",value:function(){var e={bpmRange:this.refs.bpmRange.getValue(),beatsPerStep:this.refs.beatsPerStep.getValue(),accents:this.refs.barManager.getValue()},t=this.refs.modePanel.getValue();return Object(o.a)({},e,t)}},{key:"onAccentsChange",value:function(){this.refs.sm.setAccents(this.refs.barManager.getValue())}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},92:function(e,t,n){e.exports=n(169)},97:function(e,t,n){}},[[92,2,1]]]);
//# sourceMappingURL=main.27903965.chunk.js.map